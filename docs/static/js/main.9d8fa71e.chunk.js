(this["webpackJsonphalloween-app"]=this["webpackJsonphalloween-app"]||[]).push([[0],{32:function(e,t,n){e.exports=n(52)},52:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(28),i=n.n(c),u=n(2),o=n(16),l=n(13),s=n(20),d=n(9),m=n(21),b=n.n(m),f=n(29),p=n(30),h=n(22),v=n.n(h),E={apiKey:"AIzaSyAmCghJdMvcKxDMCmQVQ2lDwvEM0e-DLQ4",authDomain:"halloween-candy-dispenser.firebaseapp.com",databaseURL:"https://halloween-candy-dispenser.firebaseio.com",projectId:"halloween-candy-dispenser",storageBucket:"halloween-candy-dispenser.appspot.com",messagingSenderId:"489903711579",appId:"1:489903711579:web:b31f80544c27adeb73667e"},O=new function e(){var t=this;Object(p.a)(this,e),this.rootRef=void 0,this.getCandies=function(){return new Promise((function(e,n){t.rootRef.child("candies").once("value",(function(t){e(Object.entries(t.val()).map((function(e){var t=Object(d.a)(e,2);return{id:t[0],name:t[1]}})))}))}))},this.subscribeToCandiesChanged=function(e){t.rootRef.child("candies").on("value",(function(t){return e(Object.entries(t.val()).map((function(e){var t=Object(d.a)(e,2);return{id:t[0],name:t[1]}})))}))},this.unSubscribeToCandiesChanged=function(){t.rootRef.child("candies").off("value")},this.subscribeToOrderSubmitted=function(e){t.rootRef.child("orders").on("child_added",function(){var n=Object(f.a)(b.a.mark((function n(a,r){var c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.rootRef.child("candies").once("value");case 2:c=n.sent,e({timestamp:new Date(+a.key),candies:a.val().split(",").map((function(e){return{id:e,name:c.val()[e]||"no longer available"}}))});case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())},this.unSubscribeToOrderSubmitted=function(){t.rootRef.child("orders").off("child_added")},this.addCandy=function(e){var n=t.rootRef.child("candies").push().key;t.rootRef.child("candies").update(Object(l.a)({},n,e))},this.removeCandy=function(e){t.rootRef.child("candies/".concat(e)).remove()},this.submitOrder=function(e){t.rootRef.child("orders").update(Object(l.a)({},(new Date).getTime(),e.join(",")))},console.log("initializing firebase app."),v.a.initializeApp(E),this.rootRef=v.a.database().ref()},j=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)({}),u=Object(d.a)(i,2),o=u[0],m=u[1];Object(a.useRef)(!1);return Object(a.useEffect)((function(){return O.subscribeToCandiesChanged((function(e){c(e)})),function(){return O.unSubscribeToCandiesChanged()}}),[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Choose which candies you would like"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),O.submitOrder(Object.entries(o).filter((function(e){var t=Object(d.a)(e,2);t[0];return t[1]})).map((function(e){var t=Object(d.a)(e,2),n=t[0];t[1];return n}))),m({})}},n.map((function(e){return r.a.createElement("label",{key:e.id},r.a.createElement("input",{type:"checkbox",checked:o[e.id],onChange:function(t){return n=e.id,void m((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(l.a)({},n,!e[n]))}));var n}}),e.name)})),r.a.createElement("button",{type:"submit"},"submit")))},g=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)([]),u=Object(d.a)(i,2),o=u[0],l=u[1],s=Object(a.useState)(""),m=Object(d.a)(s,2),b=m[0],f=m[1];return Object(a.useEffect)((function(){return O.subscribeToCandiesChanged((function(e){return l(e)})),O.subscribeToOrderSubmitted((function(e){return c((function(t){return t.concat([e])}))})),function(){O.unSubscribeToCandiesChanged(),O.unSubscribeToOrderSubmitted()}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Orders"),r.a.createElement("ul",null,n.map((function(e){var t,n,a;return r.a.createElement("li",{key:null===(t=e.timestamp)||void 0===t?void 0:t.getTime()},r.a.createElement("strong",null,null===(n=e.timestamp)||void 0===n?void 0:n.getHours(),":",null===(a=e.timestamp)||void 0===a?void 0:a.getMinutes(),"\xa0\xa0"),e.candies.map((function(e){return e.name})).join(", "))}))),r.a.createElement("h2",null,"Current candies"),o.map((function(e){return r.a.createElement("div",{key:e.id},e.name," ",r.a.createElement("button",{onClick:function(){return O.removeCandy(e.id)}},"delete"))})),"add candy:"," ",r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),O.addCandy(b),f("")}},r.a.createElement("input",{type:"text",value:b,onChange:function(e){return f(e.target.value)}}),r.a.createElement("button",{type:"submit"},"submit")))};var y=function(){return r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/requester",exact:!0},r.a.createElement(j,null)),r.a.createElement(u.b,{path:"/sender",exact:!0},r.a.createElement(g,null)),r.a.createElement(u.b,{path:"/",exact:!0},"I am...",r.a.createElement(o.b,{to:"/requester"},"requesting candy"),r.a.createElement(o.b,{to:"/sender"},"sending candy")),r.a.createElement(u.b,{path:"/"},r.a.createElement(u.a,{to:"/"})))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,null,r.a.createElement(y,null))),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.9d8fa71e.chunk.js.map